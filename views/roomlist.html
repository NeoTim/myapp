<% include header.html %>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <nav class="navbar navbar-inverse">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#">撞撞对战平台</a>
                    </div>
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li class="active"><a href="#">Home</a></li>
                            <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Action</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li class="dropdown-header">Nav header</li>
                                    <li><a href="#">Separated link</a></li>
                                    <li><a href="#">One more separated link</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><!--/.nav-collapse -->
                </div>
            </nav>

            <form id="form1" name="form1" method="post" action="/createRoom" style="display: none">
                <fieldset>
                    <h2>新建房间</h2>
                    <div class="input-group margin-bottom-sm">
                        <span class="input-group-addon"><i class="fa fa-envelope-o fa-fw"></i></span>
                        <input class="form-control" type="text" id="name" name="name" placeholder="给房间起个吊炸天的名字吧!">
                    </div>

                    <div class="input-group margin-bottom-sm">
                        <span class="input-group-addon"><i class="fa fa-envelope-o fa-fw"></i></span>
                        <textarea class="form-control" rows="3" id="desc" name="'desc" placeholder="房主记得写房间公告哦!"></textarea>
                    </div>

                    <div class="input-group">
                        <button id="form1_submit" type="button" class="btn btn-primary">创建</button>
                    </div>
                </fieldset>
            </form>

            <hr>
            <div class="row">
                <div class="col-sm-12">
                    <div class="thumbnail">
                        <img src="img/people.jpg" alt="大美女呀!!!">
                        <div class="caption">
                            <h3>冯诺尔曼结构</h3>
                            <p>
                                也称普林斯顿结构，是一种将程序指令存储器和数据存储器合并在一起的存储器结构。程序指令存储地址和数据存储地址指向同一个存储器的不同物理位置。
                            </p>
                            <p>
                                <a href="#" class="btn btn-primary" role="button">进入房间</a>
                                <a href="#" class="btn btn-default" role="button" id="share_1001">分享</a>
                            </p>
                        </div>
                    </div>

                    <div class="thumbnail">
                        <img src="img/city.jpg" alt="大美女呀!!!">
                        <div class="caption">
                            <h3>哈佛结构</h3>
                            <p>
                                哈佛结构是一种将程序指令存储和数据存储分开的存储器结构，它的主要特点是将程序和数据存储在不同的存储空间中，进行独立编址。
                            </p>
                            <p>
                                <a href="#" class="btn btn-primary" role="button">进入房间</a>
                                <a href="#" class="btn btn-default" role="button" name="share_1002">分享</a>
                            </p>
                        </div>
                    </div>

                    <div class="thumbnail">
                        <img src="img/sports.jpg" alt="大美女呀!!!">
                        <div class="caption">
                            <h3>改进型哈佛结构</h3>
                            <p>
                                改进型的哈佛结构具有一条独立的地址总线和一条独立的数据总线，两条总线由程序存储器和数据存储器分时复用，使结构更紧凑。
                            </p>
                            <p>
                                <a href="#" class="btn btn-primary" role="button">进入房间</a>
                                <a href="#" class="btn btn-default" role="button" name="share_1003">分享</a>
                            </p>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>


<div id="qrcodeCanvas"></div>

<script>
    $(document).ready(function () {
        $('#share_1001').on('click', function () {
            console.log('share_1001share_1001share_1001');
            jQuery('#qrcodeCanvas').qrcode({
                text	: "http://www.baidu.com"
            });
//            $('#qrcodeCanvas').style("display:block");
        });

        console.log('ready go!');
        $('#form1_submit').on('click', function () {
            $('#form1').ajaxSubmit({
                url : '/createRoom',
                type : 'POST',
                data : {name : $('#name').value, desc : $('#desc').value},
                dataType : 'json',
                success : function (info,tag) {
                    if(tag === 'success'){
                        console.log('成功');
                        window.location.href = info.redirect;
                    }
                },
                error : function(err){
                    console.log('请注册');
                }
            });
            return false; //阻止表单自动提交
        });
    });
</script>

<% include footer.html %>
